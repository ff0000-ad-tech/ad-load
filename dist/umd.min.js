!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("window")):"function"==typeof define&&define.amd?define(["window"],t):"object"==typeof exports?exports.adLoad=t(require("window")):e.adLoad=t(e.window)}("undefined"!=typeof self?self:this,function(e){return function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function o(){try{return new XMLHttpRequest}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}return null}function i(e){var t=e.lastIndexOf("."),n=e.lastIndexOf("/")+1;return n>t&&(t=void 0),e.substring(n,t)}function l(e){return e.substring(e.lastIndexOf("/")+1,e.indexOf("."))}function s(e){e=e||"";var t=e.indexOf("?");t>-1&&(e=e.substr(0,t));var n=e.match(/[^\\]*\.(\w+)$/),r=e.match(/(?:(?:image)|(?:font))\/(jpeg|jpg|png|gif|svg|ttf|woff)/);return n?n[1]:r?r[1]:"unknown"}function c(e,t,n){var r=u(e),a=(0,p.matchProtocolTo)(r+_file);return n&&(a=n(a)),url}function u(e){return e?e.replace(/\/?$/,"/"):""}function f(e){if("string"==typeof e)return e;var t="";for(var n in e)t+=n+"="+e[n]+"&";return t.substr(0,t.length-1)}function d(e){var t=void 0===e?{}:e,n=t.content,r=t.css,a=t.width,o=t.font,i=t.handleFail,l=t.handleTickerComplete,s=document.createElement("div");s.innerHTML=n,s.style.cssText=r||"",document.body.appendChild(s);var c=void 0!=a?a:s.offsetWidth;s.style.fontFamily=o||"";var u=setTimeout(function(){clearInterval(f),i&&i()},5e3),f=setInterval(function(){s.offsetWidth!=c&&(clearTimeout(u),clearInterval(f),l&&l(s))},10)}t.__esModule=!0,t.setTicker=d,t.LoaderUtils=t.InlineLoader=t.ImageLoader=t.FontLoader=t.DataLoader=t.default=void 0;var p=n(1),h=function(e){return new m(e)},m=function(){function e(e){this.superclass=e}return e.prototype.with=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return t(e)},this.superclass)},e}(),v=function(e){return function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];t=e.call.apply(e,[this].concat(a))||this;var i=arguments&&arguments.length>1?arguments[1]:arguments[0]||{},l=r(t);return l.onComplete=i.onComplete||function(){},l.onFail=i.onFail||function(){},l.onProgress=i.onProgress||function(){},l.name=i.name||"",l.scope=i.scope||l,l.dataRaw,l.cacheBuster=i.cacheBuster||!1,l._failCalled=!1,t}return a(t,e),t.prototype._handleFail=function(){var e=this;e._failCalled||(e._failCalled=!0,e.onFail.call(e.scope,e))},t}(e)},y=Object.freeze({__proto__:null,createXMLHttpRequest:o,getFileName:i,getFontName:l,getFileType:s,getFullUrl:c,getUrlPrepend:u,getParamsFromData:f});t.LoaderUtils=y;var g=function(e){return function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];t=e.call.apply(e,[this].concat(a))||this;var l=arguments&&arguments.length>1?arguments[1]:arguments[0]||{},c=r(t);return c.url=(0,p.matchProtocolTo)(arguments[0]||""),l.platformGetUrl&&(c.platformGetUrl=l.platformGetUrl,c.url=l.platformGetUrl(c.url)),c.fileName=void 0===l.id?i(c.url):l.id,c.fileType=l.fileType||s(c.url),t}return a(t,e),t}(e)},_=function(e){return function(e){function t(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.call.apply(e,[this].concat(n))||this}a(t,e);var n=t.prototype;return n._setTicker=function(e){var t=this;d({content:e.content,css:e.css,width:e.width,font:e.font,handleFail:t._handleFail.bind(t),handleTickerComplete:t._handleTickerComplete.bind(t)})},n._removeTickerNode=function(e){e.parentNode.removeChild(e)},t}(e)},w=function(){},T=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];t=e.call.apply(e,[this].concat(r))||this;var o=arguments&&arguments.length>1?arguments[1]:arguments[0]||{};return t.renderOnly=!!o.renderOnly,t.crossOrigin=o.crossOrigin,t}a(t,e);var n=t.prototype;return n.load=function(){var e=this;if(e.renderOnly)e._setTicker({content:e.url,width:0});else{var t=new Image;t.id=e.fileName,t.crossOrigin=e.crossOrigin,t.onload=e._handleComplete.bind(e),t.onerror=e._handleFail,t.src=e.url}},n._handleComplete=function(e){var t=this;t.dataRaw=e.target,t.onComplete.call(t.scope,t)},t}(h(w).with(v,g,_));t.ImageLoader=T;var b=function(){},C=function(e){function t(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.call.apply(e,[this].concat(n))||this}a(t,e);var n=t.prototype;return n.load=function(){var e,t=this;e="css"==t.fileType?t._createCssLink():"html"==t.fileType?t._createHtmlLink():t._createScript(),e.charset="utf-8",e.onload=t._handleComplete.bind(t),e.onerror=t._handleFail,"css"==t.fileType||"html"==t.fileType?e.href=this.url:e.src=t.url,document.getElementsByTagName("head")[0].appendChild(e)},n._createCssLink=function(){var e=document.createElement("link");return e.rel="stylesheet",e.type="text/css",e},n._createHtmlLink=function(){var e=document.createElement("link");return e.rel="import",e},n._createScript=function(){var e=document.createElement("script");return e.type="text/javascript",e},n._handleComplete=function(e){var t=this;t.dataRaw=e.target,t.onComplete.call(t.scope,t)},t}(h(b).with(v,g));t.InlineLoader=C;var q=function(){},L=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];t=e.call.apply(e,[this].concat(a))||this;var i=arguments&&arguments.length>1?arguments[1]:arguments[0]||{},l=r(t);return l.method=(i.method||"get").toLowerCase(),l.query=i.query||null,l.responseType=i.responseType||null,t}a(t,e);var n=t.prototype;return n.load=function(){var e=this,t=null,n="post"===e.method;e.req=o(),void 0!=e.responseType&&(e.req.responseType=e.responseType);var r=e.url;switch(e.query&&(t=f(e.query),n||(r+="?"+t,t=null)),e.cacheBuster&&(r+=e.query&&!n?"&":"?",r+="cb="+(new Date).getTime()),e.req.onreadystatechange=e._handleStateChange.bind(e),e.req.open(e.method,r,!0),e.fileType){case"xml":e.req.overrideMimeType&&e.req.overrideMimeType("text/xml");break;case"json":e.req.overrideMimeType&&e.req.overrideMimeType("application/json");break;case"fba":case"bin":case"binary":e.responseType=e.req.responseType="arraybuffer"}"post"===e.method&&e.req.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.req.send(t)},n._handleStateChange=function(e){var t=this;switch(t.req.readyState){case 3:200==this.req.status&&(t.dataRaw=t.responseType?t.req.response:t.req.responseText,t._handleProgress(t));break;case 4:200==t.req.status?(t.dataRaw=t.responseType?t.req.response:t.req.responseText,t._handleComplete(t)):t._handleFail({target:e})}},n._handleProgress=function(){var e=this;e.onProgress.call(e.scope,e)},n._handleComplete=function(){var e=this;e.onComplete.call(e.scope,e)},t}(h(q).with(v,g));t.DataLoader=L;var x=function(){},O=function(e){function t(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.call.apply(e,[this].concat(n))||this}a(t,e);var n=t.prototype;return n.load=function(){var e=this;e.fileName=e.fileName.split(".")[0];var t="truetype";e.fileType.match(/woff/)&&(t=e.fileType);var n="@font-face { font-family: '"+e.fileName+"'; src: url("+e.url+") format('"+t+"'); }",r=document.getElementById("RED_fontStyleSheet");if(r)r.innerHTML+=n;else{var a=document.createElement("style");a.type="text/css",a.media="screen",a.id="RED_fontStyleSheet",a.appendChild(document.createTextNode(n)),document.getElementsByTagName("head")[0].appendChild(a)}e._setTicker({content:" !\"\\#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}~",css:"position:absolute; top:-1000px; font-size:100px; font-family:san-serif; font-variant:normal; font-style:normal; font-weight:normal; letter-spacing:0; white-space:nowrap;",font:e.fileName})},n._handleTickerComplete=function(e){var t=this;setTimeout(function(){t._removeTickerNode(e)},300),t._handleComplete()},n._handleComplete=function(e){var t=this;t.dataRaw=t.fileName,t.onComplete.call(t.scope,t)},t}(h(x).with(v,g,_));t.FontLoader=O;var S=function(){},F=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];t=e.call.apply(e,[this].concat(a))||this;var i=arguments&&arguments.length>1?arguments[1]:arguments[0]||{},l=r(t);return l._queue={},l._total=0,l._active=!1,l._startedCount=0,l.prepend=i.prepend||"",l.platformGetUrl=i.platformGetUrl,l.fileType=i.fileType||null,l.content=[],l.crossOrigin=i.crossOrigin||void 0,l.add(arguments[0]),t}a(t,e);var n=t.prototype;return n.add=function(e){var n=this;if("string"==typeof e)n._addSingleLoad(e);else if(e instanceof Array)for(var r=0;r<e.length;r++)n._addSingleLoad(e[r]);else e instanceof t&&(e.content&&e.content[0]&&"fba"==e.content[0].fileType?n._addFbaSubLoads(e.content[0]):n._addSubLoad(e))},n.load=function(){var e=this;if(e._active=!0,e._total<=0);else{var n=!1,r="";for(var a in e._queue)if(!(e._queue[a]instanceof t)){n||(n=!0,r+='Loader "'+e.name+'" requesting:');var o=e._queue[a].fileName,i=e._queue[a].fileType,l=o.indexOf("."+i),s=l>-1?o:o+"."+i;r+="\n\t -> "+(e._queue[a].prepend||"")+s}}e._startSingleLoad(0)},n.getAllContent=function(){function e(r){for(var a=0;a<r.length;a++)r[a]instanceof t?e(r[a].content):n.push(r[a])}var n=[];return e(this.content),n},n.getAllContentRaw=function(){for(var e=this.getAllContent(),t=0;t<e.length;t++)e[t]=e[t].dataRaw;return e},n.getLoader=function(e){function n(a){for(var o=0;o<a.length;o++)a[o]instanceof t&&(!a[o]||a[o].name!==e&&a[o]!==e?n(a[o].content):r=a[o])}var r=null;return n(this.content),r},n._addSingleLoad=function(e,t){var n,r=this,a=t?t[1]:r.fileType||s(e);switch(a){case"jpg":case"jpeg":case"gif":case"png":case"svg":n=T;break;case"ttf":case"woff":n=O;break;case"json":case"fba":case"bin":case"binary":case"svg+xml":n=L;break;default:n=C}var o=t?e:r.prepend+e,i=new n(o,{scope:r,platformGetUrl:r.platformGetUrl,onComplete:r._handleSingleLoadComplete,onFail:r._handleFail,fileType:a,cacheBuster:r.cacheBuster,crossOrigin:r.crossOrigin});t&&(i.fileName=t[0]),i.queueIndex=r._total,r._queue[r._total]=i,r._total++},n._addSubLoad=function(e){var t=this;e.onComplete=t._handleSingleLoadComplete.bind(t),e.onProgress=t._handleProgress.bind(t),e.onFail=t._handleFail,e.queueIndex=t._total,t._queue[t._total]=e,t._total++},n._addFbaSubLoads=function(e){var t=new Uint8Array(4),n=new Uint32Array(t.buffer),r=44,a=new Uint8Array(e.dataRaw,r,1)[0];r+=5;for(var o=0;o<a;o++){for(var i=new Uint8Array(e.dataRaw,r,4),l=4,s=0;s<4;s++)t[--l]=i[s];var c=n[0];r+=7;var u=String.fromCharCode.apply(String,new Uint8Array(e.dataRaw,r++,1)),f=new Uint8Array(e.dataRaw,r+3,1),d=f[0]||0,p=new Uint8Array(e.dataRaw,r+4,d),h=String.fromCharCode.apply(String,p);d+=4;var m=new Uint8Array(e.dataRaw,r+d,c-d);r+=c+4;var v=h.split("."),y=void 0;y="f"===u?"application/"+("ttf"===v[1]?"x-font-ttf":"font-"+v[1]):"image/"+("svg"==v[1]?"svg+xml":v[1]);var g=new Blob([m],{type:y}),_=URL.createObjectURL(g);this._addSingleLoad(_,v)}},n._startSingleLoad=function(e){var n=this,r=n._queue[e];0==n._total?n._handleComplete():e<n._total&&(r instanceof t||e<n._total-1&&n._startLoadTimeOut(++e),r.load())},n._startLoadTimeOut=function(e){var t=this;setTimeout(function(){t._startSingleLoad(e)},10)},n._handleSingleLoadComplete=function(e){var t=this;t.content[e.queueIndex]=e,delete t._queue[e.queueIndex],t._handleProgress(),void 0==e.url&&e.queueIndex<t._total-1&&t._startLoadTimeOut(e.queueIndex+1)},n._handleProgress=function(){for(var e=this,t=e.content.length,n=0,r=0;r<t;r++)e.content[r]&&n++;var a=n,o=0;n<e._total&&e._queue[n]&&(o=e._queue[n].progress/e._total||0),e.progress=a/e._total+o,e.rawProgress=n/e._total+o,e.onProgress.call(e.scope,e),n>=e._total&&e._handleComplete()},n._handleComplete=function(){var e=this;e.onComplete.call(e.scope,e)},t}(h(S).with(v)),k=F;t.default=k},function(t,n){t.exports=e}])});